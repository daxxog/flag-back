/* FlagBack
 * waitfor -- everything. cbpipe + async-waitfor
 * (c) 2013 David (daXXog) Volm ><> + + + <><
 * Released under Apache License, Version 2.0:
 * http://www.apache.org/licenses/LICENSE-2.0.html  
 */ !function(t,o){"object"==typeof exports?module.exports=o():"function"==typeof define&&define.amd?define(o):t.FlagBack=o()}(this,function(){var t=function(){};return t.prototype.flags=0,t.prototype.cbs=[],t.prototype.flag=function(){var o=this;return this.flags++,function(){o.flags--,0===o.flags&&(o.cbs.forEach(function(t){"function"==typeof t&&t()}),o.cbs=t.prototype.cbs)}},t.prototype.back=function(t){"function"==typeof t&&(0===this.flags?t():this.cbs.push(t))},t});